<!doctype html>
<html>
<head>

<meta charset=utf-8>
<link rel="icon" href="img/favicon.ico">
<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name=viewport>
<link href="https://fonts.googleapis.com/css?family=Indie+Flower|Open+Sans|Orbitron|Roboto:400,500i" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat:300|Oswald" rel="stylesheet">
<title>Commandez</title>
<link rel="stylesheet" type="text/css" href="styles/index.css">
<meta name="referrer" content="origin"> <! https://stackoverflow.com/questions/35236643/error-when-submitting-formspree-io-from-github-pages >


</head>

<body class="grid">
  <div class="grid_logo">
	 <a href="index.html" class="logo">
	 	<img src="img/welly_logo_yellow.png" alt="Welly logo" style="width:144px;height:100px;">
	 </a>
	</div>

  <div class="grid_menu">
    <label for="show-menu" class="show-menu"><img src="img/hamburger.png" alt="Menu" style="width:30px;"></label>
    <input type="checkbox" id="show-menu" role="button">

    <ul id="menu" style="text-align:center;margin-top: 0px;">
      <li class="navbtn"><a href="index.html">WELLY</a></li>
      <li class="navbtn"><a href="nosproduits.html">NOS PRODUITS</a></li>
      <li class="navbtn"><a href="ousommesnous.html">OU SOMMES-NOUS?</a></li>
      <li class="navbtn"><a href="notrehistoire.html">NOTRE HISTOIRE</a></li>
      <li class="navbtn"><a href="commandez.html">COMMANDEZ</a></li>
      <li class="navbtn"><a href="contact.html">CONTACT</a></li>   
    </ul>
  </div>

  <div class="grid_title">
    Commandez
  </div>

  <div class="grid_content" style="text-align:center;">
    <form method="POST" action="https://phpformswallie.herokuapp.com/orderplacement.php" class="commandez">
      <input type="email" name="email" placeholder="Votre email" required><br>

      <button id="button" onlick="duplicate()">Add product line</button>
      <button type="submit">ENVOYEZ</button>

      <div id="OrderLine0">
          <select name="productlist0" id="productlist">
            <option value="None"        >   -- choisissez un produit --   </option>
            <option value="JusBissap"   >   Jus de Bissap (250 ml)        </option>
            <option value="JusGingembre">   Jus de Gingembre (250 ml)     </option>
            <option value="JusTamarin"  >   Jus de Tamarin (250 ml)       </option>
            <option value="SiropBissap" >   Sirop de Bissap (1 litre)     </option>
          </select>
          <input name="qty0" id="qty" placeholder="0">
          <div id="ol_unit_price">-</div> FCFA
          <div id="ol_total_price">-</div> FCFA
          <br><br>
      </div>
      
    </form>
    <div id="totalPrice">---</div> FCFA<br>
    
  </div>

  <div class="grid_footer" style="color:#444444;">
  WELLY – Banane APROVAG <br>
	info@welly.sn –  77 888 52 63 <br>
	Quartier Abbatoirs Lot n°5 – Tambacounda
  </div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="js/main.js"></script> <!-- Resource jQuery -->


<script type="text/javascript">
  
$('#productlist').change(function(){
      var product_prices= new Array();
        product_prices["None"]=0;
        product_prices["JusBissap"]=100;
        product_prices["JusGingembre"]=100;
        product_prices["JusTamarin"]=100;
        product_prices["SiropBissap"]=1700;
      
      product = $(this).val();
      price = product_prices[product];

      $("#ol_unit_price").text(price);
      
      $("#txt_name").trigger("keyup");
});

$("#qty").on("keyup change", function() {
     var value = this.value;
     var valuemath = value * price;
     $("#ol_unit_price").text(price);  
     $("#ol_total_price").text(valuemath);

     var sum = 0.0;
      $('#ol_total_price').each(function() {
        sum += parseFloat($(this).text());
      });
      $("#totalPrice").text(sum);
});




document.getElementById('button').onclick = duplicate;

var i = 0;
var original = document.getElementById('OrderLine0');

function duplicate() {
    var clone = original.cloneNode(true); // "deep" clone
    clone.id = "OrderLine" + ++i; // there can only be one element with an ID
    
    var productlist = $("#clone.id :select");
    productlist.name = "productlist" + ++i;
    var qtyinput = $("#OrderLine0 :input");
    qtyinput.name = "qty" + ++i;
    
    original.parentNode.appendChild(clone);
}

</script>

</body>
</html>